<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SPA Nested Pages</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    nav a, .inner-link { margin: 0 10px; text-decoration: none; color: blue; }
    nav a:hover, .inner-link:hover { text-decoration: underline; }
    #app { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>SPA with Page-in-Page</h1>
  <nav>
    <a href="/home" data-link>Home</a>
    <a href="/about" data-link>About</a>
    <a href="/blog" data-link>Blog</a>
  </nav>
  <div id="app"></div>

  <script>
    const routes = {
      "/home": `
        <h2>Home</h2>
        <p>Welcome to the home page.</p>
      `,
      "/about": `
        <h2>About</h2>
        <p>This SPA supports nested navigation!</p>
      `,
      "/blog": `
        <h2>Blog</h2>
        <p>Choose an article:</p>
        <a href="/blog/article1" data-link class="inner-link">Article 1</a> | 
        <a href="/blog/article2" data-link class="inner-link">Article 2</a>
      `,
      "/blog/article1": `
        <h2>Article 1</h2>
        <p>This is the first article.</p>
        <a href="/blog" data-link class="inner-link">⬅ Back to Blog</a>
      `,
      "/blog/article2": `
        <h2>Article 2</h2>
        <p>This is the second article.</p>
        <a href="/blog" data-link class="inner-link">⬅ Back to Blog</a>
      `
    };

    function navigateTo(path) {
      history.pushState({}, "", path);
      render();
    }

    function render() {
      const path = window.location.pathname;
      document.getElementById("app").innerHTML =
        routes[path] || "<h2>404</h2><p>Page not found.</p>";
    }

    // Global click handler (works for nav + inner links)
    document.addEventListener("click", e => {
      if (e.target.matches("[data-link]")) {
        e.preventDefault();
        navigateTo(e.target.getAttribute("href"));
      }
    });

    // Back/forward
    window.addEventListener("popstate", render);

    // Initial load
    render();
  </script>
</body>
</html>
